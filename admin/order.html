<!DOCTYPE html>
<html lang="en">

 	<head>
 		<!-- Meta Tags -->
		<meta charset="UTF-8">
		<meta name="author" content="Kamran Mubarik">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<!-- Title -->
 		<title>Create an E-Commerce Website using HTML, CSS and JS</title>
 		<!-- Style Sheet -->
		<link rel="stylesheet" type="text/css" href="css/style.css" />
 	</head>
<body>

	<header>
		<div class="container">
			<div class="brand">
				<div class="logo">
					<a href="index.html">
						<img src="../img/icons/online_shopping.png">
						<div class="logo-text">
							<p class="big-logo">Ecommerce</p>
							<p class="small-logo">online shop</p>
						</div>
					</a>
				</div> <!-- logo -->
				<div class="shop-icon">
					<div class="dropdown">
						<img src="../img/icons/account.png">
						<div class="dropdown-menu">
							<ul>
								<li><a href="#">My Account</a></li>								
								<li><a href="#">Settings</a></li>
								<li><a href="#">Logout</a></li>
							</ul>
						</div>
					</div>
				</div> <!-- shop icons -->
			</div> <!-- brand -->
		</div> <!-- container -->
	</header> <!-- header -->

	<main>
		
		<div class="main-content">
			<div class="sidebar">
				<h3>Menu</h3>
				<ul>
					<li><a class="active" href="index.html">Home</a></li>
					<li><a href="order.html">Order</a></li>
					<li><a href="product.html">Product</a></li>
					<li><a href="category.html">Category</a></li>
					<li><a href="stock.html">Stock</a></li>
					<li><a href="">Users</a></li>
				</ul>
			</div>
			<div class="content">
				<h3>Order</h3>
				<div class="content-detail">
				  <table>
					<thead>
					  <tr>
						<th>Date</th>
						<th>Order Ref#</th>
						<th>User</th>
						<th>Amount</th>
						<th>Payment Mode</th>
						<th>Status</th>
						<th>View</th>
						<th>Delete</th>
					  </tr>
					</thead>
					<tbody>
					 
					</tbody>
				  </table>
				</div>
			  </div>
		</div>		

	</main> <!-- Main Area -->

	<footer>
		<div class="container">
			<div class="footer-bar">
				<div class="copyright-text">
					<p>Copryright 2020 - All Rights Reserved</p>
				</div>
			</div> <!-- Footer Bar -->
		</div>
	</footer> 

</body>
<script>
	document.addEventListener('DOMContentLoaded', function() {
	  // Fetch and display orders when the page loads
	  fetch('/fetchOrders')
		.then(response => response.json())
		.then(data => {
		  displayOrders(data);
		})
		.catch(error => {
		  console.error('Error fetching orders:', error);
		});
  
	  function displayOrders(orders) {
		const tableBody = document.querySelector('.content-detail tbody');
		
		orders.forEach(order => {
		  const row = tableBody.insertRow();
		  row.innerHTML = `
			<td>${order.date}</td>
			<td>${order.orderRef}</td>
			<td>${order.user}</td>
			<td>${order.amount}</td>
			<td>${order.paymentMode}</td>
			<td>${order.status}</td>
			<td><button onclick="viewOrder(${order.id})">View</button></td>
			<td><button onclick="deleteOrder(${order.id})">Delete</button></td>
		  `;
		});
	  }
  
	
	  function viewOrder(orderId) {
	
		console.log('View order with ID:', orderId);
	  }
  
	  function deleteOrder(orderId) {
	
		console.log('Delete order with ID:', orderId);
	  }
	});
  </script>
  
</html>